<!-- BRISCO Be Your Own Light (Thibodaux-native tone update), 2024-12-19 -->
---
export interface Props {
  id: number;
  name: string;
  price: number;
  frontImg: string;
  backImg: string;
  desc: string;
}

const { id, name, price, frontImg, backImg, desc } = Astro.props;
---

<div class="product-card" data-product-id={id}>
  <div class="limited-drop">Limited Drop</div>
  <div class="limited-batch">LIMITED: Small-batch</div>

  
  <div class="product-image-container">
    <img 
      src={frontImg} 
      alt=""
      class="product-image front"
      loading="lazy"
    />
    <img 
      src={backImg} 
      alt=""
      class="product-image back"
      loading="lazy"
    />
  </div>
  
  <div class="product-info">
    <h3 class="product-name">{name}</h3>
    <div class="product-price">${price}</div>
    <p class="product-description">{desc}</p>
    
    <button 
      class="btn btn-primary add-to-cart"
      data-product='{JSON.stringify({ id, name, price, frontImg })}'
      onclick={`window.briscoCart && window.briscoCart.addItem(${JSON.stringify({ id, name, price, frontImg })})`}
      aria-label={`Add ${name} to cart`}
    >
      Add to Cart
    </button>
  </div>
</div>

<script>
  // Simple visual feedback for add to cart
  document.addEventListener('DOMContentLoaded', () => {
    const addToCartButtons = document.querySelectorAll('.add-to-cart');
    
    addToCartButtons.forEach(button => {
      button.addEventListener('click', (e) => {
        // Visual feedback
        const originalText = button.textContent;
        button.textContent = 'Added!';
        button.classList.add('loading');
        
        setTimeout(() => {
          button.textContent = originalText;
          button.classList.remove('loading');
        }, 1000);
      });
    });
  });
</script>

<style>
  /* Mobile-specific ProductCard optimizations */
  @media (max-width: 768px) {
    .product-card {
      margin: 0 auto;
      max-width: 350px;
    }
    
    .product-image-container {
      height: 380px;
    }
    
    .product-info {
      padding: 1.25rem;
    }
    
    .product-name {
      font-size: 1.1rem;
      line-height: 1.4;
    }
    
    .product-price {
      font-size: 1.3rem;
    }
    
    .product-description {
      font-size: 0.85rem;
      line-height: 1.5;
    }
    
    .add-to-cart {
      width: 100%;
      padding: 0.9rem;
      font-size: 0.8rem;
    }
  }
  
  @media (max-width: 480px) {
    .product-card {
      max-width: 320px;
    }
    
    .product-image-container {
      height: 350px;
    }
    
    .product-info {
      padding: 1rem;
    }
    
    .product-name {
      font-size: 1rem;
    }
    
    .product-price {
      font-size: 1.2rem;
    }
    
    .product-description {
      font-size: 0.8rem;
    }
    
    .add-to-cart {
      padding: 0.8rem;
      font-size: 0.75rem;
    }
    
    .scarcity-timer {
      font-size: 0.65rem;
      padding: 0.2rem 0.5rem;
    }
    
    .limited-drop {
      font-size: 0.7rem;
      padding: 0.2rem 0.5rem;
    }
    
    .limited-batch {
      font-size: 0.65rem;
      padding: 0.2rem 0.5rem;
      top: 2.8rem;
    }
  }
</style>
